<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Arduino Tlc5940 Library: Core Libary Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Arduino Tlc5940 Library
   &#160;<span id="projectnumber">r14 - 2009-05-07</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Core Libary Functions</div>  </div>
</div><!--header-->
<div class="contents">

<p>These function are all prefixed with "Tlc.".  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__ReqVPRG__ENABLED"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ReqVPRG__ENABLED.html">Functions that Require VPRG_ENABLED</a></td></tr>
<tr class="memdesc:group__ReqVPRG__ENABLED"><td class="mdescLeft">&#160;</td><td class="mdescRight">Functions that require VPRG_ENABLED == 1. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaa42fdda37a43a13f49b00924d93eedd4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CoreFunctions.html#gaa42fdda37a43a13f49b00924d93eedd4">Tlc5940::init</a> (uint16_t initialValue=0)</td></tr>
<tr class="memdesc:gaa42fdda37a43a13f49b00924d93eedd4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pin i/o and Timer setup.  <a href="#gaa42fdda37a43a13f49b00924d93eedd4">More...</a><br /></td></tr>
<tr class="separator:gaa42fdda37a43a13f49b00924d93eedd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5e5acd62f0c91579694ed4cffd88bd76"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CoreFunctions.html#ga5e5acd62f0c91579694ed4cffd88bd76">Tlc5940::clear</a> (void)</td></tr>
<tr class="memdesc:ga5e5acd62f0c91579694ed4cffd88bd76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears the grayscale data array, <a class="el" href="Tlc5940_8h.html#a1560009c42233131f7abe72e8113f793" title="Packed grayscale data, 24 bytes (16 * 12 bits) per TLC. ">tlc_GSData</a>, but does not shift in any data.  <a href="#ga5e5acd62f0c91579694ed4cffd88bd76">More...</a><br /></td></tr>
<tr class="separator:ga5e5acd62f0c91579694ed4cffd88bd76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga18ee51310250855d75cff715a5ff4d48"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CoreFunctions.html#ga18ee51310250855d75cff715a5ff4d48">Tlc5940::update</a> (void)</td></tr>
<tr class="memdesc:ga18ee51310250855d75cff715a5ff4d48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shifts in the data from the grayscale data array, <a class="el" href="Tlc5940_8h.html#a1560009c42233131f7abe72e8113f793" title="Packed grayscale data, 24 bytes (16 * 12 bits) per TLC. ">tlc_GSData</a>.  <a href="#ga18ee51310250855d75cff715a5ff4d48">More...</a><br /></td></tr>
<tr class="separator:ga18ee51310250855d75cff715a5ff4d48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3d487c503365fa5b948b6711b9dac73e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CoreFunctions.html#ga3d487c503365fa5b948b6711b9dac73e">Tlc5940::set</a> (<a class="el" href="tlc__config_8h.html#ab23dc44a3be02131509f5ab61f68530e">TLC_CHANNEL_TYPE</a> channel, uint16_t value)</td></tr>
<tr class="memdesc:ga3d487c503365fa5b948b6711b9dac73e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets channel to value in the grayscale data array, <a class="el" href="Tlc5940_8h.html#a1560009c42233131f7abe72e8113f793" title="Packed grayscale data, 24 bytes (16 * 12 bits) per TLC. ">tlc_GSData</a>.  <a href="#ga3d487c503365fa5b948b6711b9dac73e">More...</a><br /></td></tr>
<tr class="separator:ga3d487c503365fa5b948b6711b9dac73e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac712fcd944dd3f5f4f0ff158d754ea06"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CoreFunctions.html#gac712fcd944dd3f5f4f0ff158d754ea06">Tlc5940::get</a> (<a class="el" href="tlc__config_8h.html#ab23dc44a3be02131509f5ab61f68530e">TLC_CHANNEL_TYPE</a> channel)</td></tr>
<tr class="memdesc:gac712fcd944dd3f5f4f0ff158d754ea06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the current grayscale value for a channel.  <a href="#gac712fcd944dd3f5f4f0ff158d754ea06">More...</a><br /></td></tr>
<tr class="separator:gac712fcd944dd3f5f4f0ff158d754ea06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacb63767b2063823e9c5d0e1d8db77ceb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CoreFunctions.html#gacb63767b2063823e9c5d0e1d8db77ceb">Tlc5940::setAll</a> (uint16_t value)</td></tr>
<tr class="memdesc:gacb63767b2063823e9c5d0e1d8db77ceb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets all channels to value.  <a href="#gacb63767b2063823e9c5d0e1d8db77ceb">More...</a><br /></td></tr>
<tr class="separator:gacb63767b2063823e9c5d0e1d8db77ceb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5b39a8719693ebb40aaa1005ab6c7323"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CoreFunctions.html#ga5b39a8719693ebb40aaa1005ab6c7323">Tlc5940::setAllDC</a> (uint8_t value)</td></tr>
<tr class="memdesc:ga5b39a8719693ebb40aaa1005ab6c7323"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the dot correction for all channels to value.  <a href="#ga5b39a8719693ebb40aaa1005ab6c7323">More...</a><br /></td></tr>
<tr class="separator:ga5b39a8719693ebb40aaa1005ab6c7323"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga732323bcfa69b08c39485866d692704a"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CoreFunctions.html#ga732323bcfa69b08c39485866d692704a">Tlc5940::readXERR</a> (void)</td></tr>
<tr class="memdesc:ga732323bcfa69b08c39485866d692704a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks for shorted/broken LEDs reported by any of the TLCs.  <a href="#ga732323bcfa69b08c39485866d692704a">More...</a><br /></td></tr>
<tr class="separator:ga732323bcfa69b08c39485866d692704a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>These function are all prefixed with "Tlc.". </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga5e5acd62f0c91579694ed4cffd88bd76"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Tlc5940::clear </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clears the grayscale data array, <a class="el" href="Tlc5940_8h.html#a1560009c42233131f7abe72e8113f793" title="Packed grayscale data, 24 bytes (16 * 12 bits) per TLC. ">tlc_GSData</a>, but does not shift in any data. </p>
<p>This call should be followed by <a class="el" href="group__CoreFunctions.html#ga18ee51310250855d75cff715a5ff4d48" title="Shifts in the data from the grayscale data array, tlc_GSData. ">update()</a> if you are turning off all the outputs. </p>

</div>
</div>
<a class="anchor" id="gac712fcd944dd3f5f4f0ff158d754ea06"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t Tlc5940::get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tlc__config_8h.html#ab23dc44a3be02131509f5ab61f68530e">TLC_CHANNEL_TYPE</a>&#160;</td>
          <td class="paramname"><em>channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the current grayscale value for a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>(0 to <a class="el" href="tlc__config_8h.html#aa673c2d8e04c9cca25f51d6c2b516b8f" title="Number of TLCs daisy-chained. ">NUM_TLCS</a> * 16 - 1). OUT0 of the first TLC is channel 0, OUT0 of the next TLC is channel 16, etc. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>current grayscale value (0 - 4095) for channel </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__CoreFunctions.html#ga3d487c503365fa5b948b6711b9dac73e" title="Sets channel to value in the grayscale data array, tlc_GSData. ">set</a> </dd></dl>

</div>
</div>
<a class="anchor" id="gaa42fdda37a43a13f49b00924d93eedd4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Tlc5940::init </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>initialValue</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pin i/o and Timer setup. </p>
<p>The grayscale register will be reset to all zeros, or whatever initialValue is set to and the Timers will start. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">initialValue</td><td>= 0, optional parameter specifing the inital startup value </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga732323bcfa69b08c39485866d692704a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t Tlc5940::readXERR </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks for shorted/broken LEDs reported by any of the TLCs. </p>
<dl class="section return"><dt>Returns</dt><dd>1 if a TLC is reporting an error, 0 otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="ga3d487c503365fa5b948b6711b9dac73e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Tlc5940::set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tlc__config_8h.html#ab23dc44a3be02131509f5ab61f68530e">TLC_CHANNEL_TYPE</a>&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets channel to value in the grayscale data array, <a class="el" href="Tlc5940_8h.html#a1560009c42233131f7abe72e8113f793" title="Packed grayscale data, 24 bytes (16 * 12 bits) per TLC. ">tlc_GSData</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>(0 to <a class="el" href="tlc__config_8h.html#aa673c2d8e04c9cca25f51d6c2b516b8f" title="Number of TLCs daisy-chained. ">NUM_TLCS</a> * 16 - 1). OUT0 of the first TLC is channel 0, OUT0 of the next TLC is channel 16, etc. </td></tr>
    <tr><td class="paramname">value</td><td>(0-4095). The grayscale value, 4095 is maximum. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__CoreFunctions.html#gac712fcd944dd3f5f4f0ff158d754ea06" title="Gets the current grayscale value for a channel. ">get</a> </dd></dl>

</div>
</div>
<a class="anchor" id="gacb63767b2063823e9c5d0e1d8db77ceb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Tlc5940::setAll </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets all channels to value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">value</td><td>grayscale value (0 - 4095) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga5b39a8719693ebb40aaa1005ab6c7323"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Tlc5940::setAllDC </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the dot correction for all channels to value. </p>
<p>The dot correction value correspondes to maximum output current by <img class="formulaInl" alt="$\displaystyle I_{OUT_n} = I_{max} \times \frac{DCn}{63} $" src="form_0.png"/> where</p><ul>
<li><img class="formulaInl" alt="$\displaystyle I_{max} = \frac{1.24V}{R_{IREF}} \times 31.5 = \frac{39.06}{R_{IREF}} $" src="form_1.png"/></li>
<li>DCn is the dot correction value for channel n <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">value</td><td>(0-63) </td></tr>
  </table>
  </dd>
</dl>
</li>
</ul>

</div>
</div>
<a class="anchor" id="ga18ee51310250855d75cff715a5ff4d48"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t Tlc5940::update </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shifts in the data from the grayscale data array, <a class="el" href="Tlc5940_8h.html#a1560009c42233131f7abe72e8113f793" title="Packed grayscale data, 24 bytes (16 * 12 bits) per TLC. ">tlc_GSData</a>. </p>
<p>If data has already been shifted in this grayscale cycle, another call to <a class="el" href="group__CoreFunctions.html#ga18ee51310250855d75cff715a5ff4d48" title="Shifts in the data from the grayscale data array, tlc_GSData. ">update()</a> will immediately return 1 without shifting in the new data. To ensure that a call to <a class="el" href="group__CoreFunctions.html#ga18ee51310250855d75cff715a5ff4d48" title="Shifts in the data from the grayscale data array, tlc_GSData. ">update()</a> does shift in new data, use </p><div class="fragment"><div class="line"><span class="keywordflow">while</span>(<a class="code" href="Tlc5940_8cpp.html#a4a520693b05c8dcd19ef500540a8b75e">Tlc</a>.<a class="code" href="group__CoreFunctions.html#ga18ee51310250855d75cff715a5ff4d48">update</a>()); </div></div><!-- fragment --><p> or </p><div class="fragment"><div class="line"><span class="keywordflow">while</span>(<a class="code" href="Tlc5940_8cpp.html#a5e4408cb0b93f0d5617680a8c3540242">tlc_needXLAT</a>); </div></div><!-- fragment --> <dl class="section return"><dt>Returns</dt><dd>1 if there is data waiting to be latched, 0 if data was successfully shifted in </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
