<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Arduino Tlc5940 Library: Extended Library Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Arduino Tlc5940 Library
   &#160;<span id="projectnumber">r14 - 2009-05-07</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Extended Library Functions</div>  </div>
</div><!--header-->
<div class="contents">

<p>These functions require an include statement at the top of the sketch.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__ReqVPRG__ENABLED"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ReqVPRG__ENABLED.html">Functions that Require VPRG_ENABLED</a></td></tr>
<tr class="memdesc:group__ReqVPRG__ENABLED"><td class="mdescLeft">&#160;</td><td class="mdescRight">Functions that require VPRG_ENABLED == 1. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga587f08f4ed1ae1d1c8e87720be52fa62"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ExtendedFunctions.html#ga587f08f4ed1ae1d1c8e87720be52fa62">tlc_playAnimation</a> (prog_uint8_t *animation, uint16_t frames, uint16_t periodsPerFrame)</td></tr>
<tr class="memdesc:ga587f08f4ed1ae1d1c8e87720be52fa62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Plays an animation from progmem in the "background" (with interrupts).  <a href="#ga587f08f4ed1ae1d1c8e87720be52fa62">More...</a><br /></td></tr>
<tr class="separator:ga587f08f4ed1ae1d1c8e87720be52fa62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9b568baea2ed82ae278925596a412cd7"><td class="memItemLeft" align="right" valign="top">volatile void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ExtendedFunctions.html#ga9b568baea2ed82ae278925596a412cd7">tlc_animationXLATCallback</a> (void)</td></tr>
<tr class="memdesc:ga9b568baea2ed82ae278925596a412cd7"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is called by the XLAT interrupt every PWM period to do stuff.  <a href="#ga9b568baea2ed82ae278925596a412cd7">More...</a><br /></td></tr>
<tr class="separator:ga9b568baea2ed82ae278925596a412cd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5af78538816f1331f3d1977b6feaa2df"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ExtendedFunctions.html#ga5af78538816f1331f3d1977b6feaa2df">tlc_addFade</a> (struct <a class="el" href="structTlc__Fade.html">Tlc_Fade</a> *fade)</td></tr>
<tr class="memdesc:ga5af78538816f1331f3d1977b6feaa2df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a fade to the buffer.  <a href="#ga5af78538816f1331f3d1977b6feaa2df">More...</a><br /></td></tr>
<tr class="separator:ga5af78538816f1331f3d1977b6feaa2df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac32743e3ae17199f6d91bea66410a6c5"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ExtendedFunctions.html#gac32743e3ae17199f6d91bea66410a6c5">tlc_addFade</a> (<a class="el" href="tlc__config_8h.html#ab23dc44a3be02131509f5ab61f68530e">TLC_CHANNEL_TYPE</a> channel, int16_t startValue, int16_t endValue, uint32_t startMillis, uint32_t endMillis)</td></tr>
<tr class="memdesc:gac32743e3ae17199f6d91bea66410a6c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a fade to the fade buffer.  <a href="#gac32743e3ae17199f6d91bea66410a6c5">More...</a><br /></td></tr>
<tr class="separator:gac32743e3ae17199f6d91bea66410a6c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3ba34d1e1519c8f742b364958bced96f"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ExtendedFunctions.html#ga3ba34d1e1519c8f742b364958bced96f">tlc_isFading</a> (<a class="el" href="tlc__config_8h.html#ab23dc44a3be02131509f5ab61f68530e">TLC_CHANNEL_TYPE</a> channel)</td></tr>
<tr class="memdesc:ga3ba34d1e1519c8f742b364958bced96f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks to see if any fades are happening on channel.  <a href="#ga3ba34d1e1519c8f742b364958bced96f">More...</a><br /></td></tr>
<tr class="separator:ga3ba34d1e1519c8f742b364958bced96f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga262446811b33d3765bf9434bebb60cff"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ExtendedFunctions.html#ga262446811b33d3765bf9434bebb60cff">tlc_removeFades</a> (<a class="el" href="tlc__config_8h.html#ab23dc44a3be02131509f5ab61f68530e">TLC_CHANNEL_TYPE</a> channel)</td></tr>
<tr class="memdesc:ga262446811b33d3765bf9434bebb60cff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes any fades from the fade buffer on this channel.  <a href="#ga262446811b33d3765bf9434bebb60cff">More...</a><br /></td></tr>
<tr class="separator:ga262446811b33d3765bf9434bebb60cff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga48d61decbeb32b4b31c0e82097e69577"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ExtendedFunctions.html#ga48d61decbeb32b4b31c0e82097e69577">tlc_updateFades</a> ()</td></tr>
<tr class="memdesc:ga48d61decbeb32b4b31c0e82097e69577"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates fades using millis()  <a href="#ga48d61decbeb32b4b31c0e82097e69577">More...</a><br /></td></tr>
<tr class="separator:ga48d61decbeb32b4b31c0e82097e69577"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa3da29446480ef76d5c2a26ef97b1884"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ExtendedFunctions.html#gaa3da29446480ef76d5c2a26ef97b1884">tlc_updateFades</a> (uint32_t currentMillis)</td></tr>
<tr class="memdesc:gaa3da29446480ef76d5c2a26ef97b1884"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates any running fades.  <a href="#gaa3da29446480ef76d5c2a26ef97b1884">More...</a><br /></td></tr>
<tr class="separator:gaa3da29446480ef76d5c2a26ef97b1884"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab61761323f7364b25d83c6e63711cd4b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ExtendedFunctions.html#gab61761323f7364b25d83c6e63711cd4b">tlc_setGSfromProgmem</a> (prog_uint8_t *gsArray)</td></tr>
<tr class="memdesc:gab61761323f7364b25d83c6e63711cd4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the grayscale data from an array in progmem.  <a href="#gab61761323f7364b25d83c6e63711cd4b">More...</a><br /></td></tr>
<tr class="separator:gab61761323f7364b25d83c6e63711cd4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafda382e9cf45520a6a5d6ae866785db8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ExtendedFunctions.html#gafda382e9cf45520a6a5d6ae866785db8">tlc_initServos</a> (uint8_t initAngle)</td></tr>
<tr class="memdesc:gafda382e9cf45520a6a5d6ae866785db8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the tlc.  <a href="#gafda382e9cf45520a6a5d6ae866785db8">More...</a><br /></td></tr>
<tr class="separator:gafda382e9cf45520a6a5d6ae866785db8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga813d2236e395bc29a66908fd683f61fc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ExtendedFunctions.html#ga813d2236e395bc29a66908fd683f61fc">tlc_setServo</a> (<a class="el" href="tlc__config_8h.html#ab23dc44a3be02131509f5ab61f68530e">TLC_CHANNEL_TYPE</a> channel, uint8_t angle)</td></tr>
<tr class="memdesc:ga813d2236e395bc29a66908fd683f61fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets a servo on channel to angle.  <a href="#ga813d2236e395bc29a66908fd683f61fc">More...</a><br /></td></tr>
<tr class="separator:ga813d2236e395bc29a66908fd683f61fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8cac1e00c8fe44fdfe71ed7623440df2"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ExtendedFunctions.html#ga8cac1e00c8fe44fdfe71ed7623440df2">tlc_getServo</a> (<a class="el" href="tlc__config_8h.html#ab23dc44a3be02131509f5ab61f68530e">TLC_CHANNEL_TYPE</a> channel)</td></tr>
<tr class="memdesc:ga8cac1e00c8fe44fdfe71ed7623440df2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the current angle that channel is set to.  <a href="#ga8cac1e00c8fe44fdfe71ed7623440df2">More...</a><br /></td></tr>
<tr class="separator:ga8cac1e00c8fe44fdfe71ed7623440df2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4583e7fd6068bc60670fa1d8213b7058"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ExtendedFunctions.html#ga4583e7fd6068bc60670fa1d8213b7058">tlc_angleToVal</a> (uint8_t angle)</td></tr>
<tr class="memdesc:ga4583e7fd6068bc60670fa1d8213b7058"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts and angle (0 - SERVO_MAX_ANGLE) to the inverted tlc channel value (4095 - 0).  <a href="#ga4583e7fd6068bc60670fa1d8213b7058">More...</a><br /></td></tr>
<tr class="separator:ga4583e7fd6068bc60670fa1d8213b7058"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0d85d1813cdd7bca0d5aeea2e00aa896"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ExtendedFunctions.html#ga0d85d1813cdd7bca0d5aeea2e00aa896">tlc_valToAngle</a> (uint16_t value)</td></tr>
<tr class="memdesc:ga0d85d1813cdd7bca0d5aeea2e00aa896"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts an inverted tlc channel value (4095 - 0) into an angle (0 - SERVO_MAX_ANGLE).  <a href="#ga0d85d1813cdd7bca0d5aeea2e00aa896">More...</a><br /></td></tr>
<tr class="separator:ga0d85d1813cdd7bca0d5aeea2e00aa896"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad499bc0e483c5b25efb839ade79bcaa0"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ExtendedFunctions.html#gad499bc0e483c5b25efb839ade79bcaa0">tlc_shiftUp</a> (uint16_t zeroValue)</td></tr>
<tr class="memdesc:gad499bc0e483c5b25efb839ade79bcaa0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shifts all the channel data up (OUT0 becomes OUT1 ...).  <a href="#gad499bc0e483c5b25efb839ade79bcaa0">More...</a><br /></td></tr>
<tr class="separator:gad499bc0e483c5b25efb839ade79bcaa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaed782802c116fdd531198281b196908b"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ExtendedFunctions.html#gaed782802c116fdd531198281b196908b">tlc_shiftDown</a> (uint16_t topValue)</td></tr>
<tr class="memdesc:gaed782802c116fdd531198281b196908b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shifts all the channel data down (OUT 15 -&gt; OUT 14 ...).  <a href="#gaed782802c116fdd531198281b196908b">More...</a><br /></td></tr>
<tr class="separator:gaed782802c116fdd531198281b196908b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>These functions require an include statement at the top of the sketch. </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="tlc__animations_8h.html">tlc_animations.h</a>&quot;</span> </div></div><!-- fragment --><ul>
<li>void tlc_playAnimation(prog_uint8_t *animation, uint16_t frames, uint16_t periodsPerFrame) - plays an animation from progmem.</li>
</ul>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="tlc__fades_8h.html">tlc_fades.h</a>&quot;</span> </div></div><!-- fragment --><ul>
<li>uint8_t <a class="el" href="group__ExtendedFunctions.html#ga48d61decbeb32b4b31c0e82097e69577" title="Updates fades using millis() ">tlc_updateFades()</a> - updates all fades</li>
<li>uint8_t <a class="el" href="group__ExtendedFunctions.html#gaa3da29446480ef76d5c2a26ef97b1884" title="Updates any running fades. ">tlc_updateFades(uint32_t currentMillis)</a> - updates fades using currentMillis as the current time</li>
<li>uint8_t <a class="el" href="group__ExtendedFunctions.html#ga5af78538816f1331f3d1977b6feaa2df" title="Adds a fade to the buffer. ">tlc_addFade(struct Tlc_Fade *fade)</a> - copies fade into the fade buffer</li>
<li>uint8_t tlc_addFade(TLC_CHANNEL_TYPE channel, int16_t startValue, int16_t endValue, uint32_t startMillis, uint32_t endMillis) - adds a fade to the fade buffer</li>
<li>uint8_t <a class="el" href="group__ExtendedFunctions.html#ga3ba34d1e1519c8f742b364958bced96f" title="Checks to see if any fades are happening on channel. ">tlc_isFading(TLC_CHANNEL_TYPE channel)</a> - returns 1 if there's a fade on this channel in the buffer</li>
<li>uint8_t <a class="el" href="group__ExtendedFunctions.html#ga262446811b33d3765bf9434bebb60cff" title="Removes any fades from the fade buffer on this channel. ">tlc_removeFades(TLC_CHANNEL_TYPE channel)</a> - removes all fades on channel</li>
</ul>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="tlc__progmem__utils_8h.html">tlc_progmem_utils.h</a>&quot;</span> </div></div><!-- fragment --><ul>
<li>void <a class="el" href="group__ExtendedFunctions.html#gab61761323f7364b25d83c6e63711cd4b" title="Sets the grayscale data from an array in progmem. ">tlc_setGSfromProgmem(prog_uint8_t *gsArray)</a> - copies the progmem grayscale to current grayscale array. Requires a <a class="el" href="group__CoreFunctions.html#ga18ee51310250855d75cff715a5ff4d48">Tlc.update() </a>.</li>
<li>void <a class="el" href="group__ReqVPRG__ENABLED.html#ga0ee9aa27ddfa975fba5b1dbba1cced25" title="Sets the dot correction data from an array in progmem. ">tlc_setDCfromProgmem(prog_uint8_t *dcArray)</a> - shifts the data from a progmem dot correction array (doesn't need an update).</li>
</ul>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="tlc__servos_8h.html">tlc_servos.h</a>&quot;</span> </div></div><!-- fragment --><ul>
<li>void tlc_initServos(uint8_t initAngle = 0) - initializes the tlc for servos.</li>
<li>void <a class="el" href="group__ExtendedFunctions.html#ga813d2236e395bc29a66908fd683f61fc" title="Sets a servo on channel to angle. ">tlc_setServo(TLC_CHANNEL_TYPE channel, uint8_t angle)</a> - sets a servo to an angle</li>
<li>uint8_t <a class="el" href="group__ExtendedFunctions.html#ga8cac1e00c8fe44fdfe71ed7623440df2" title="Gets the current angle that channel is set to. ">tlc_getServo(TLC_CHANNEL_TYPE channel)</a> - gets the currently set servo angle</li>
</ul>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="tlc__shifts_8h.html">tlc_shifts.h</a>&quot;</span> </div></div><!-- fragment --><ul>
<li>uint16_t tlc_shiftUp(uint16_t zeroValue = 0) - shifts all channel data up (OUT0 becomes OUT1 ...) and returns OUT15</li>
<li>uint16_t tlc_shiftDown(uint16_t topValue = 0) - shifts all channel data down (OUT15 becomes OUT14 ...) and returns OUT0 </li>
</ul>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga5af78538816f1331f3d1977b6feaa2df"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t tlc_addFade </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structTlc__Fade.html">Tlc_Fade</a> *&#160;</td>
          <td class="paramname"><em>fade</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a fade to the buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fade</td><td>the fade to be copied into the buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if the fade buffer is full, fadeBufferSize if added successfully </dd></dl>

</div>
</div>
<a class="anchor" id="gac32743e3ae17199f6d91bea66410a6c5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t tlc_addFade </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tlc__config_8h.html#ab23dc44a3be02131509f5ab61f68530e">TLC_CHANNEL_TYPE</a>&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>startValue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>endValue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>startMillis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>endMillis</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a fade to the fade buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>the ouput channel this fade is on </td></tr>
    <tr><td class="paramname">startValue</td><td>the value at the start of the fade </td></tr>
    <tr><td class="paramname">endValue</td><td>the value at the end of the fade </td></tr>
    <tr><td class="paramname">startMillis</td><td>the millis() when to start the fade </td></tr>
    <tr><td class="paramname">endMillis</td><td>the millis() when to end the fade </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if the fade buffer is full, fadeBufferSize if added successfully </dd></dl>

</div>
</div>
<a class="anchor" id="ga4583e7fd6068bc60670fa1d8213b7058"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t tlc_angleToVal </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>angle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts and angle (0 - SERVO_MAX_ANGLE) to the inverted tlc channel value (4095 - 0). </p>

</div>
</div>
<a class="anchor" id="ga9b568baea2ed82ae278925596a412cd7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile void tlc_animationXLATCallback </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is called by the XLAT interrupt every PWM period to do stuff. </p>

</div>
</div>
<a class="anchor" id="ga8cac1e00c8fe44fdfe71ed7623440df2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t tlc_getServo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tlc__config_8h.html#ab23dc44a3be02131509f5ab61f68530e">TLC_CHANNEL_TYPE</a>&#160;</td>
          <td class="paramname"><em>channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the current angle that channel is set to. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>which channel to get </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gafda382e9cf45520a6a5d6ae866785db8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tlc_initServos </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>initAngle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the tlc. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">initAngle</td><td>the initial angle to set all servos to (0 - SERVO_MAX_ANGLE). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga3ba34d1e1519c8f742b364958bced96f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t tlc_isFading </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tlc__config_8h.html#ab23dc44a3be02131509f5ab61f68530e">TLC_CHANNEL_TYPE</a>&#160;</td>
          <td class="paramname"><em>channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks to see if any fades are happening on channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>the channel to check </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if there is a fade in the buffer on this channel, 0 otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="ga587f08f4ed1ae1d1c8e87720be52fa62"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tlc_playAnimation </td>
          <td>(</td>
          <td class="paramtype">prog_uint8_t *&#160;</td>
          <td class="paramname"><em>animation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>frames</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>periodsPerFrame</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Plays an animation from progmem in the "background" (with interrupts). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">animation</td><td>A progmem array of grayscale data, length NUM_TLCS * 24 * frames, in reverse order. Ensure that there is not an update waiting to happen before calling this. </td></tr>
    <tr><td class="paramname">frames</td><td>the number of frames in animation </td></tr>
    <tr><td class="paramname">periodsPerFrame</td><td>number of PWM periods to wait between each frame (0 means play the animation as fast as possible). The default PWM period for a 16MHz clock is 1.024ms. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga262446811b33d3765bf9434bebb60cff"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t tlc_removeFades </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tlc__config_8h.html#ab23dc44a3be02131509f5ab61f68530e">TLC_CHANNEL_TYPE</a>&#160;</td>
          <td class="paramname"><em>channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes any fades from the fade buffer on this channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>which channel the fades are on </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>how many fades were removed </dd></dl>

</div>
</div>
<a class="anchor" id="gab61761323f7364b25d83c6e63711cd4b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tlc_setGSfromProgmem </td>
          <td>(</td>
          <td class="paramtype">prog_uint8_t *&#160;</td>
          <td class="paramname"><em>gsArray</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the grayscale data from an array in progmem. </p>
<p>This doesn't shift out any data: call Tlc.update(). An example: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;#include &quot;tlc_progmem_utils.h&quot;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;prog_uint8_t gsArray1[NUM_TLCS * 24] = {</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  GS_DUO((4095 * 16)/16, (4095 * 15)/16), GS_DUO((4095 * 14)/16, (4095 * 13)/16),</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;  GS_DUO((4095 * 12)/16, (4095 * 11)/16), GS_DUO((4095 * 10)/16, (4095 * 9)/16),</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;  GS_DUO((4095 * 8)/16, (4095 * 7)/16), GS_DUO((4095 * 6)/16, (4095 * 5)/16),</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;  GS_DUO((4095 * 4)/16, (4095 * 3)/16), GS_DUO((4095 * 2)/16, (4095 * 1)/16),</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;};</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;// sometime after Tlc.init()</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;tlc_setGSfromProgmem(gsArray1);</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;Tlc.update();</div></div><!-- fragment --><p> This would set a ramp of values from OUT0 to OUT15. (Although the NUM_TLCS * 24 looks like an error, each <a class="el" href="tlc__config_8h.html#a01153a2052cd531a30dd05472a909cb6" title="Arranges 2 grayscale values (0 - 4095) in the packed array format (3 bytes). ">GS_DUO</a> is 3 bytes). The array would have to be expanded if <a class="el" href="tlc__config_8h.html#aa673c2d8e04c9cca25f51d6c2b516b8f" title="Number of TLCs daisy-chained. ">NUM_TLCS</a> != 1.</p>
<p>The format of the grayscale array is explained in <a class="el" href="Tlc5940_8h.html#a1560009c42233131f7abe72e8113f793" title="Packed grayscale data, 24 bytes (16 * 12 bits) per TLC. ">tlc_GSData</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gsArray</td><td>A progmem array of grayscale data. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga813d2236e395bc29a66908fd683f61fc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tlc_setServo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tlc__config_8h.html#ab23dc44a3be02131509f5ab61f68530e">TLC_CHANNEL_TYPE</a>&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>angle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets a servo on channel to angle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>which channel to set </td></tr>
    <tr><td class="paramname">angle</td><td>(0 - SERVO_MAX_ANGLE) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gaed782802c116fdd531198281b196908b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t tlc_shiftDown </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>topValue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shifts all the channel data down (OUT 15 -&gt; OUT 14 ...). </p>
<p>Needs a Tlc.update() after. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topValue</td><td>the value of Tlc (n) channel 15. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the value that was shifted off the bottom (OUT0) </dd></dl>

</div>
</div>
<a class="anchor" id="gad499bc0e483c5b25efb839ade79bcaa0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t tlc_shiftUp </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>zeroValue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shifts all the channel data up (OUT0 becomes OUT1 ...). </p>
<p>Needs a Tlc.update() after. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">zeroValue</td><td>the value of channel 0. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the value that was shifted off the end (OUT15) </dd></dl>

</div>
</div>
<a class="anchor" id="ga48d61decbeb32b4b31c0e82097e69577"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t tlc_updateFades </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates fades using millis() </p>
<dl class="section return"><dt>Returns</dt><dd>0 if there are no fades left in the buffer. </dd></dl>

</div>
</div>
<a class="anchor" id="gaa3da29446480ef76d5c2a26ef97b1884"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t tlc_updateFades </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>currentMillis</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates any running fades. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">currentMillis</td><td>the current millis() time. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if there are no fades left in the buffer. </dd></dl>

</div>
</div>
<a class="anchor" id="ga0d85d1813cdd7bca0d5aeea2e00aa896"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t tlc_valToAngle </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts an inverted tlc channel value (4095 - 0) into an angle (0 - SERVO_MAX_ANGLE). </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
